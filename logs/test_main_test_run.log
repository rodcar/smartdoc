(.venv) (base) ivan@Ivans-MacBook-Pro smartdoc % python tests/test_endpoint_accuracy.py
🚀 Starting HTTP Endpoint Accuracy Test
📍 Working directory: /Users/ivan/Workspace/agentai-document-data-extractor/smartdoc
📁 Project root: /Users/ivan/Workspace/agentai-document-data-extractor/smartdoc

🧪 HTTP Endpoint Accuracy Test
============================================================
🌐 Testing endpoint: http://localhost:8000/api/analyze/
📁 Dataset path: /Users/ivan/Workspace/agentai-document-data-extractor/smartdoc/output/docs-sm_validation
🎯 Document types: 16 types

📂 Collecting validation images...
📊 Found 764 total validation images
🎲 Sampling 100 images for testing

📷 Processing 1/100: 96900943_0945.jpg ... ✅
📷 Processing 2/100: 2070055167d.jpg ... ✅
📷 Processing 3/100: 2084420939_0940.jpg ... ❌ (predicted: invoice, true: advertisement)
📷 Processing 4/100: 2062907551.jpg ... ❌ (predicted: budget, true: specification)
📷 Processing 5/100: 518305808+-5812.jpg ... ✅
📷 Processing 6/100: 518113654.jpg ... ✅
📷 Processing 7/100: 2046039536.jpg ... ✅
📷 Processing 8/100: 2073806199d.jpg ... ✅
📷 Processing 9/100: 508592242.jpg ... ✅
📷 Processing 10/100: 2073813674a.jpg ... ✅
📈 Progress: 10/100 - Current Accuracy: 80.0% - Avg Time: 20.93s
📷 Processing 11/100: 2057322796_2837.jpg ... ❌ (predicted: specification, true: scientific_report)
📷 Processing 12/100: 506049519+-9528.jpg ... ❌ (predicted: handwritten, true: questionnaire)
📷 Processing 13/100: 85006560.jpg ... ✅
📷 Processing 14/100: 50308888-8889.jpg ... ✅
📷 Processing 15/100: 2029236668.jpg ... ❌ (predicted: email, true: memo)
📷 Processing 16/100: 500747733+-7734.jpg ... ✅
📷 Processing 17/100: 2084511059_1060.jpg ... ❌ (predicted: handwritten, true: advertisement)
📷 Processing 18/100: tnwl0034642.jpg ... ❌ (predicted: form, true: budget)
📷 Processing 19/100: 2505233972_3973.jpg ... ❌ (predicted: memo, true: form)
📷 Processing 20/100: 2071517750.jpg ... ❌ (predicted: memo, true: form)
📈 Progress: 20/100 - Current Accuracy: 55.0% - Avg Time: 26.23s
📷 Processing 21/100: 86202917_2950.jpg ... ❌ (predicted: file_folder, true: presentation)
📷 Processing 22/100: 50491066-1067.jpg ... ✅
📷 Processing 23/100: 509133543+-3543.jpg ... ✅
📷 Processing 24/100: 50203925-3926.jpg ... ✅
📷 Processing 25/100: 0060096842.jpg ... ❌ (predicted: handwritten, true: form)
📷 Processing 26/100: 2057125978_5979.jpg ... ✅
📷 Processing 27/100: 2023091026_2023091029.jpg ... ✅
📷 Processing 28/100: 2505155019_5020.jpg ... ❌ (predicted: handwritten, true: scientific_report)
📷 Processing 29/100: 0000988294.jpg ... ✅
📷 Processing 30/100: 0000137069.jpg ... ❌ (predicted: file_folder, true: memo)
📈 Progress: 30/100 - Current Accuracy: 56.7% - Avg Time: 24.47s
📷 Processing 31/100: 506053435+-3435.jpg ... ❌ (predicted: specification, true: form)
📷 Processing 32/100: 2045041927.jpg ... ❌ (predicted: memo, true: news_article)
📷 Processing 33/100: 50644974-4975.jpg ... ✅
📷 Processing 34/100: 517547638+-7639.jpg ... ✅
📷 Processing 35/100: 2045316134.jpg ... ❌ (predicted: handwritten, true: advertisement)
📷 Processing 36/100: 2025822605.jpg ... ✅
📷 Processing 37/100: 2072686310_6317.jpg ... ❌ (predicted: scientific_publication, true: scientific_report)
📷 Processing 38/100: 0000056745.jpg ... ❌ (predicted: invoice, true: specification)
📷 Processing 39/100: 50033143.jpg ... ✅
📷 Processing 40/100: 2069738854.jpg ... ✅
📈 Progress: 40/100 - Current Accuracy: 55.0% - Avg Time: 22.88s
📷 Processing 41/100: 2040925853-b.jpg ... ✅
📷 Processing 42/100: 2070316542.jpg ... ✅
📷 Processing 43/100: 70012383-2383.jpg ... ✅
📷 Processing 44/100: 506567705_506567707.jpg ... ✅
📷 Processing 45/100: 2040962826.jpg ... ✅
📷 Processing 46/100: 502233354+-3354.jpg ... ❌ (predicted: memo, true: letter)
📷 Processing 47/100: 2045807408.jpg ... ❌ (predicted: handwritten, true: budget)
📷 Processing 48/100: 508252483.jpg ... ❌ (predicted: memo, true: letter)
📷 Processing 49/100: 2023225052.jpg ... ✅
📷 Processing 50/100: 0000790115.jpg ... ❌ (predicted: memo, true: resume)
📈 Progress: 50/100 - Current Accuracy: 56.0% - Avg Time: 22.09s
📷 Processing 51/100: 504104073_504104075.jpg ... ✅
📷 Processing 52/100: 81215840_81215841.jpg ... ❌ (predicted: handwritten, true: advertisement)
📷 Processing 53/100: 2504092459.jpg ... ✅
📷 Processing 54/100: 0071019500.jpg ... ✅
📷 Processing 55/100: 528008062+-8062.jpg ... ✅
📷 Processing 56/100: 2065418675.jpg ... ❌ (predicted: news_article, true: letter)
📷 Processing 57/100: 96652671.jpg ... ❌ (predicted: specification, true: budget)
📷 Processing 58/100: 522705214+-5215.jpg ... ✅
📷 Processing 59/100: 50120566-0566.jpg ... ❌ (predicted: questionnaire, true: invoice)
📷 Processing 60/100: 2505498632_8641.jpg ... ✅
📈 Progress: 60/100 - Current Accuracy: 56.7% - Avg Time: 21.43s
📷 Processing 61/100: 50501022-1022.jpg ... ✅
📷 Processing 62/100: 507636143.jpg ... ✅
📷 Processing 63/100: 70056027-6027.jpg ... ❌ (predicted: news_article, true: resume)
📷 Processing 64/100: 2085587600.jpg ... ✅
📷 Processing 65/100: 2050888247.jpg ... ✅
📷 Processing 66/100: 03714601.jpg ... ❌ (predicted: file_folder, true: advertisement)
📷 Processing 67/100: 98703910.jpg ... ❌ (predicted: questionnaire, true: scientific_report)
📷 Processing 68/100: 2073085423.jpg ... ✅
📷 Processing 69/100: 0001219743.jpg ... ✅
📷 Processing 70/100: 04002591.jpg ... ❌ (predicted: form, true: budget)
📈 Progress: 70/100 - Current Accuracy: 57.1% - Avg Time: 21.80s
📷 Processing 71/100: 505441252.jpg ... ❌ (predicted: budget, true: specification)
📷 Processing 72/100: 2063245842.jpg ... ✅
📷 Processing 73/100: 504552254.jpg ... ❌ (predicted: handwritten, true: specification)
📷 Processing 74/100: 506472801_506472802.jpg ... ✅
📷 Processing 75/100: 2025028610.jpg ... ❌ (predicted: scientific_publication, true: news_article)
📷 Processing 76/100: 87675435.jpg ... ❌ (predicted: news_article, true: scientific_publication)
📷 Processing 77/100: 1001814705_1001814708.jpg ... ✅
📷 Processing 78/100: 0060200236.jpg ... ❌ (predicted: handwritten, true: file_folder)
📷 Processing 79/100: 521509663+-9663.jpg ... ✅
📷 Processing 80/100: 525420721+-1425.jpg ... ❌ (predicted: presentation, true: letter)
📈 Progress: 80/100 - Current Accuracy: 55.0% - Avg Time: 21.53s
📷 Processing 81/100: 513269283.jpg ... ❌ (predicted: invoice, true: form)
📷 Processing 82/100: 505818724_505818728.jpg ... ✅
📷 Processing 83/100: 70108835-8844.jpg ... ✅
📷 Processing 84/100: 2023027987_2023027988.jpg ... ❌ (predicted: handwritten, true: budget)
📷 Processing 85/100: 50604972-4973.jpg ... ✅
📷 Processing 86/100: 1000821949.jpg ... ✅
📷 Processing 87/100: 2026411910.jpg ... ✅
📷 Processing 88/100: 500080763.jpg ... ❌ (predicted: handwritten, true: questionnaire)
📷 Processing 89/100: 2069722642.jpg ... ✅
📷 Processing 90/100: 2063229272.jpg ... ❌ (predicted: handwritten, true: file_folder)
📈 Progress: 90/100 - Current Accuracy: 55.6% - Avg Time: 22.59s
📷 Processing 91/100: 2024939576_2024939578.jpg ... ❌ (predicted: handwritten, true: news_article)
📷 Processing 92/100: 2024483728_2024483729.jpg ... ✅
📷 Processing 93/100: 500549754_500549755.jpg ... ✅
📷 Processing 94/100: 2501092768.jpg ... ❌ (predicted: memo, true: scientific_publication)
📷 Processing 95/100: 2047172141.jpg ... ✅
📷 Processing 96/100: 96377421.jpg ... ❌ (predicted: handwritten, true: form)
📷 Processing 97/100: 89001193.jpg ... ❌ (predicted: form, true: invoice)
📷 Processing 98/100: 2040786347_2040786355.jpg ... ✅
📷 Processing 99/100: 2063195878.jpg ... ❌ (predicted: invoice, true: form)
📷 Processing 100/100: 0000064508.jpg ... ❌ (predicted: scientific_report, true: specification)
📈 Progress: 100/100 - Current Accuracy: 54.0% - Avg Time: 22.95s

============================================================
📊 HTTP ENDPOINT ACCURACY TEST RESULTS
============================================================
📁 Total images tested: 100
✅ Successful requests: 100
❌ Failed requests: 0
🎯 Correct predictions: 54
📈 Overall Accuracy: 54.00%
⏱️  Total time: 2295.39s
⚡ Average time per request: 22.95s

📋 Accuracy by Document Type:
--------------------------------------------------
advertisement            :  28.6% ( 2/ 7)
budget                   :  50.0% ( 5/10)
email                    : 100.0% ( 4/ 4)
file_folder              :  66.7% ( 4/ 6)
form                     :  30.0% ( 3/10)
handwritten              : 100.0% ( 6/ 6)
invoice                  :  33.3% ( 1/ 3)
letter                   :  63.6% ( 7/11)
memo                     :   0.0% ( 0/ 2)
news_article             :  25.0% ( 1/ 4)
presentation             :   0.0% ( 0/ 1)
questionnaire            :  66.7% ( 4/ 6)
resume                   :  66.7% ( 4/ 6)
scientific_publication   :  71.4% ( 5/ 7)
scientific_report        :  20.0% ( 1/ 5)
specification            :  58.3% ( 7/12)

📝 Sample Predictions:
----------------------------------------------------------------------
Status Image                     True Type            Predicted            Entities
----------------------------------------------------------------------
✅      96900943_0945.jpg         scientific_publication scientific_publication 18      
✅      2070055167d.jpg           email                email                7       
❌      2084420939_0940.jpg       advertisement        invoice              9       
❌      2062907551.jpg            specification        budget               14      
✅      518305808+-5812.jpg       handwritten          handwritten          5       
✅      518113654.jpg             handwritten          handwritten          3       
✅      2046039536.jpg            form                 form                 7       
✅      2073806199d.jpg           email                email                5       
✅      508592242.jpg             specification        specification        19      
✅      2073813674a.jpg           email                email                6       
❌      2057322796_2837.jpg       scientific_report    specification        24      
❌      506049519+-9528.jpg       questionnaire        handwritten          7       
✅      85006560.jpg              budget               budget               11      
✅      50308888-8889.jpg         resume               resume               17      
❌      2029236668.jpg            memo                 email                15      
... and 85 more results

============================================================
✅ GOOD: Accuracy 54.00% is above 50%
============================================================